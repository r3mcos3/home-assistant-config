---
- id: e50c1fcc-7515-4592-aea0-bd6e46b2693a
  alias: Livingroom - Heating
  mode: single
  trigger:
    - platform: homeassistant
      event: start
    - platform: event
      event_type: automation_reloaded
    - platform: state
      entity_id:
        - sensor.livingroom_temp
        - person.remco
        - person.annemarie
        - input_number.below_temp
        - input_number.set_temp
  action:
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.livingroom_temp
              below: input_number.below_temp
            - condition: time
              before: input_datetime.heating_stop
              after: input_datetime.heating_start
            - condition: or
              conditions:
                - condition: state
                  entity_id: person.annemarie
                  state: home
                - condition: state
                  entity_id: person.remco
                  state: home
          sequence:
            - service: climate.set_temperature
              data:
                entity_id: climate.woonkamer
                hvac_mode: heat
                temperature: "{{ states('input_number.set_temp') }}"
      default:
        - service: climate.turn_off
          data:
            entity_id: climate.woonkamer
